<div class="drawing" #drawing>
	
	<div><span *ngIf="hoverGroup">{{hoverGroup.title}}</span>&nbsp;</div>
	
	<svg [attr.height]="scale * 750 + 'px'" width="100%" viewBox="0 0 1000 1000">
		
		<g *ngFor="let group of groups; let i = index">
			<path [attr.d]="getEStripePath(i, group)"  stroke-width="2" stroke="#fff" [attr.fill]="selectedGroup==group ? '#E73431' : '#2581C4'" />
			<path [attr.d]="getBStripePath(i, group)"  stroke-width="2" stroke="#fff" [attr.fill]="selectedGroup==group ? '#E73431' : '#FFC000'" />
			
			<path [attr.d]="getStripePath(i,innerSize,1)" stroke-width="0" fill="#09f" class="bgstripe" (mouseover)="hoverGroup=group" (mouseout)="hoverGroup=null" (click)="selectGroup(group)" />
		</g>
		
		<circle [attr.r]="getCircleR()" [attr.cx]="cx" [attr.cy]="cy" [attr.fill]="selectedGroup==null ? '#E73431' : '#2581C4'" stroke-width="2" stroke="#fff" (click)="selectGroup(null)" class="circle" />
	</svg>
</div>

<div *ngIf="selectedGroup" id="selectedGroup">
	<h4>{{selectedGroup.title}}</h4>

	<div *ngIf="data.groupIndex[selectedGroup.id]">

		<div *ngFor="let paragraph of data.groupIndex[selectedGroup.id].paragraphs" class="paragraph">

			<div class="graph">
				<svg height="100px" width="100px" viewBox="0 0 1000 1000">
					<path *ngIf="paragraph.expenditureAmount" [attr.d]="generateStripePath(500,500,0,500,0,paragraph.budgetAmount ? paragraph.expenditureAmount / paragraph.budgetAmount : 0)" stroke-width="20" stroke="#fff" fill="#09f" />
					<path [attr.d]="generateStripePath(500,500,0,500,paragraph.budgetAmount ? paragraph.expenditureAmount / paragraph.budgetAmount : 0,paragraph.budgetAmount ? 1 - paragraph.expenditureAmount / paragraph.budgetAmount : 0)" stroke-width="20" stroke="#fff" fill="#f90" />
				</svg>
				
				<br>

				<span style="color:#2581C4;">&#9632;</span> Skutečné výdaje: {{paragraph.expenditureAmount | money:0:true}} Kč
				<br>
				<span style="color:#FFC000;">&#9632;</span> Zbývající rozpočet: {{paragraph.budgetAmount - paragraph.expenditureAmount | money:0:true}} Kč

			</div>

			<div class="content">
				<h5>{{paragraph.id}} - {{paragraph.name}}</h5>

				<table class="viztable">
					<tr *ngFor="let event of paragraph.expenditureEvents">
						<th>{{event.name}}</th>
						<td>{{event.expenditureAmount | money:0:true}} Kč</td>
						<td>{{event.budgetAmount | money:0:true}} Kč</td>
					</tr>
				</table>
			</div>
			<hr>
		</div>
	</div>
</div>