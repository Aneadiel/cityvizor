<h2>
	<span>Přehled</span>
</h2>

<div class="row">
	<div class="col-sm-4">
		<h4>
			<i class="fa fa-info-circle"></i>
			Základní údaje
		</h4>
		<div class="small">
			<div class="row">
				<div class="col-xs-4"><strong><i class="fa fa-map-signs"></i> Adresa</strong></div>
				<div class="col-xs-8">
					{{profile.entity.address?.street}} {{profile.entity?.address?.streetNo}}
					<br>
					{{profile.entity.address?.city}}
					{{profile.entity.address?.psc}}
					
				</div>
			</div>
			<div class="row">
				<div class="col-xs-4"><strong><i class="fa fa-hashtag"></i> ZÚJ</strong></div>
				<div class="col-xs-8">{{profile.entity._id}}</div>
			</div>
			<div class="row">
				<div class="col-xs-4"><strong><i class="fa fa-hashtag"></i> IČO</strong></div>
				<div class="col-xs-8">{{profile.entity.ico}}</div>
			</div>
			<div class="row">
				<div class="col-xs-4"><strong><i class="fa fa-envelope"></i> Email</strong></div>
				<div class="col-xs-8">{{profile.entity.email}}</div>
			</div>
			<div class="row">
				<div class="col-xs-4"><strong><i class="fa fa-globe"></i> Datová schránka</strong></div>
				<div class="col-xs-8">{{profile.entity.dataBox}}</div>
			</div>
			<div class="row">
				<div class="col-xs-4"><strong><i class="fa fa-external-link"></i> Web</strong></div>
				<div class="col-xs-8"><a href="http://www.nmnm.cz" target="_blank">www.nmnm.cz</a></div>
			</div>
		</div>
		<!--
			596230	00294900	Městský úřad	Nové Město na Moravě	Vratislavovo nám.	103	59231	Nové Město na Moravě	Nové Město na Moravě	566 598 300	566598305	posta@nmnm.cz	y67bvir	http://www.nmnm.cz	Po.,Stř.,8:00-17:00, Čt.,8:00-14:00	Městský úřad	Starosta:Michal Šmarda	566 650 201	starosta@nmnm.cz	Místost.:Stanislav Marek		mistostarosta@nmnm.cz	CZ0635596230	3577836,99	5492763,74	3577732	5492675
		-->
	</div>
	<div class="col-sm-4 text-center">
		<!-- MAPA -->
		<div>
			<profile-map [profiles]="[profile]"></profile-map>
		</div>
	</div>
	<div class="col-sm-4">
		<h4>
			<i class="fa fa-clock-o"></i>
			Provoz obecního úřadu
		</h4>
		<div class="row rowHours" *ngFor="let day of days;let i = index">
			<div class="col-xs-2 dayTitle">{{daysCZ[i]}}</div>
			<div class="col-xs-10 barHours">
				<div *ngFor="let openHours of profile.entity.openHours[day]" class="barHoursOpened" [style.margin-left]="getBarMarginLeft(openHours.from)+'%'"  [style.margin-right]="getBarMarginRight(openHours.to)+'%'">
					<div class="titleHours titleHoursStart">{{hour2string(openHours.from)}}</div>
					<div class="titleHours titleHoursEnd">{{hour2string(openHours.to)}}</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="row hidden">
	<div class="col-sm-6 text-center">
		<h4>Příjmy</h4>
		<br>
		<svg height="200px" width="200px" viewBox="0 0 1000 1000">
			<g>
				<g *ngIf="dashboard.income">
					<g *ngFor="let bar of dashboard.income;let i = index">
						
						<text [attr.x]="100 + getIncBarWidth()/2 + i * (getIncBarWidth() + 50)" y="120" style="fill:#2581C4;font-size:80px;text-anchor:middle;">{{bar.budgetAmount | money:0:true}}</text>

						<rect [attr.x]="100 + i * (getIncBarWidth() + 50)" [attr.width]="getIncBarWidth()" [attr.y]="100" [attr.height]="700 * (bar.budgetAmount - bar.expenditureAmount)/bar.budgetAmount" fill="#ADF" stroke="#fff" stroke-width="5" />
						<text [attr.x]="100 + getIncBarWidth()/2 + i * (getIncBarWidth() + 50)" y="285" style="fill:#fff;font-size:80px;text-anchor:middle;">{{bar.budgetAmount - bar.expenditureAmount | money:0:true}}</text>

						<rect [attr.x]="100 + i * (getIncBarWidth() + 50)" [attr.width]="getIncBarWidth()" [attr.y]="100 + 700 * (bar.budgetAmount - bar.expenditureAmount)/bar.budgetAmount"  [attr.height]="700 * bar.expenditureAmount/bar.budgetAmount" fill="#2581C4" stroke="#fff" stroke-width="5" />
						<text [attr.x]="100 + getIncBarWidth()/2 + i * (getIncBarWidth() + 50)" [attr.y]="285 + 700 * (bar.budgetAmount - bar.expenditureAmount)/bar.budgetAmount" style="fill:#fff;font-size:80px;text-anchor:middle;">{{bar.expenditureAmount | money:0:true}}</text>

						<text [attr.x]="100 + getIncBarWidth()/2 + i * (getIncBarWidth() + 50)" y="990" style="fill:#333;font-size:80px;text-anchor:middle;">{{bar.year}}</text>
					</g>
				</g>

				<line x1="0" y1="900" x2="1000" y2="900" style="stroke:#999;stroke-width:2;font-size:40px;text-anchor:middle;" />
			</g>
		</svg>
	</div>
	
	<div class="col-sm-6 text-center">
		<h4>Výdaje</h4>
		<br>
		<svg height="200px" width="200px" viewBox="0 0 1000 1000">
			<g>
				<g *ngIf="dashboard.expenditures">
					<g *ngFor="let bar of dashboard.expenditures;let i = index">
						
						<text [attr.x]="100 + getExpBarWidth()/2 + i * (getExpBarWidth() + 50)" y="120" style="fill:#2581C4;font-size:80px;text-anchor:middle;">{{bar.budgetAmount | money:0:true}}</text>
						
						<rect [attr.x]="100 + i * (getExpBarWidth() + 50)" [attr.width]="getExpBarWidth()" [attr.y]="200" [attr.height]="700 * (bar.budgetAmount - bar.expenditureAmount)/bar.budgetAmount" fill="#ADF" stroke="#fff" stroke-width="5" />
						<text [attr.x]="100 + getExpBarWidth()/2 + i * (getExpBarWidth() + 50)" y="285" style="fill:#fff;font-size:50px;text-anchor:middle;">{{bar.budgetAmount - bar.expenditureAmount | money:0:true}}</text>

						<rect [attr.x]="100 + i * (getExpBarWidth() + 50)" [attr.width]="getExpBarWidth()" [attr.y]="200 + 700 * (bar.budgetAmount - bar.expenditureAmount)/bar.budgetAmount"  [attr.height]="700 * bar.expenditureAmount/bar.budgetAmount" fill="#2581C4" stroke="#fff" stroke-width="5" />
						<text [attr.x]="100 + getExpBarWidth()/2 + i * (getExpBarWidth() + 50)" [attr.y]="285 + 700 * (bar.budgetAmount - bar.expenditureAmount)/bar.budgetAmount" style="fill:#fff;font-size:50px;text-anchor:middle;">{{bar.expenditureAmount | money:0:true}}</text>

						<text [attr.x]="100 + getExpBarWidth()/2 + i * (getExpBarWidth() + 50)" y="990" style="fill:#333;font-size:80px;text-anchor:middle;">{{bar.year}}</text>
					</g>
				</g>

				<line x1="0" y1="900" x2="1000" y2="900" style="stroke:#999;stroke-width:2;" />
			</g>
		</svg>
	</div>
</div>
<div class="row hidden">
	<div class="col-sm-12 text-center">
		<i class="fa fa-square" aria-hidden="true" style="color:#2581C4;"></i> Čerpáno
			&nbsp;&nbsp;&nbsp;
		<i class="fa fa-square" aria-hidden="true" style="color:#ADF;"></i> Zbývá vyčerpat
	</div>
</div>


<div class="row">
	<div class="col-sm-12 text-center">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xml:space="preserve">
			<g>
				<text *ngFor="let c of [2012,2013,2014,2015]; let i = index;" [attr.x]="(i+1/2)*1000/4" [attr.y]="50" style="fill:#aaa;font-size:20px;text-anchor:middle;">{{c}}</text>
			</g>
			<g>
				<g *ngFor="let c of [[0,0],[2000000,1800000],[2500000,2600000],[1500000,1800000]]; let i = index;">
					<g *ngIf="c[0]>0 && c[1]>0">
						<g>
							<circle	[attr.cx]="(i+1/2)*1000/4" 
											[attr.cy]="(c[0]>=c[1]?150+70*(1-c[0]/2500000):150+70*(1-c[1]/2500000))" 
											[attr.fill]="c[0]>=c[1]?'#E73431':'#2581C4'" 
											[attr.r]="(c[0]>=c[1]?70*(c[0]/2500000):70*(c[1]/2500000))" />
							<circle	[attr.cx]="(i+1/2)*1000/4" 
											[attr.cy]="(c[0]<c[1]?150+70*(1-c[0]/2500000)-1:150+70*(1-c[1]/2500000))-1" 
											style="fill:#ffffff;" 
											[attr.r]="(c[0]<c[1]?70*(c[0]/2500000):70*(c[1]/2500000))" />
							<text	[attr.x]="(i+1/2)*1000/4" 
											[attr.y]="(c[0]<c[1]?155+70*(1-c[0]/2500000):155+70*(1-c[1]/2500000))" 
											[attr.fill]="c[0]>=c[1]?'#E73431':'#2581C4'" 
											 style="font-weight: bold;font-size:20px;text-anchor:middle;">{{(c[0]>=c[1]?'':'+')+(c[1]-c[0])/1000+'mil.'}}</text>
						</g>
						<g>
							<g *ngFor="let d of c; let j = index;">
								<rect *ngFor="let e of [1,2,3,4,5]; let k = index;"
												[attr.x]="(i+1/2)*1000/4+(j-1)*31" 
												[attr.y]="250+d/2600000*200/5*k+k"
												width="30"
												[attr.height]="d/2600000*200/5"
												[attr.fill]="j==0?'#E7'+(34+k*10)+''+(31+k*10):'#'+(25+k*10)+''+(81+k*3)+'C4'"
												stroke-width="0"
												stroke="#ffffff"/>
							</g>
						</g>
					</g> 
					<g *ngIf="c[0]<=0 || c[1]<=0">
						<circle	[attr.cx]="(i+1/2)*1000/4" 
										[attr.cy]="170" 
										[attr.fill]="'#aaa'" 
										[attr.r]="50" />	
						<circle	[attr.cx]="(i+1/2)*1000/4" 
										[attr.cy]="174" 
										style="fill:#ffffff;" 
										[attr.r]="45" />		
						<text	[attr.x]="(i+1/2)*1000/4" 
										[attr.y]="180" 
										 style="fill:#aaa;font-weight: bold;font-size:20px;text-anchor:middle;">?</text>
					</g> 
				</g>
			</g>
		</svg>
	</div>
</div>
