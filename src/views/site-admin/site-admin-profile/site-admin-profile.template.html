
<div *ngIf="profile" class="profile">

  <a (click)="close.emit()" class="close"><i class="fa fa-times fa-lg" aria-hidden="true"></i></a>

  <h3>{{profile.name}}</h3>

  <div class="row">

    <div class="col-sm-9 editform">
      <form class="form-horizontal" (submit)="saveProfile(profileForm)" #profileForm="ngForm">

        <div class="form-group">
          <label for="name" class="col-sm-3 control-label">Titulek</label>
          <div class="col-sm-9">
            <input type="text" class="form-control" id="name" name="name" [ngModel]="profile.name" required>
          </div>
        </div>

        <div class="form-group">
          <label for="url" class="col-sm-3 control-label">Adresa</label>
          <div class="col-sm-9">
            <div class="input-group">
              <span class="input-group-addon">https://cityvizor.cz/profil/</span>
              <input type="text" class="form-control" id="url" name="url" [ngModel]="profile.url">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="obec" class="col-sm-3 control-label">Propojená obec<br>(kód ZÚJ)</label>
          <div class="col-sm-9">
            <div class="input-group">
              <input type="text" class="form-control" name="entity" #inputEntity [ngModel]="profile.entity._id" required pattern="\d{6}" placeholder="123456">
              <span class="input-group-addon"><button type="button" (click)="checkEntity(inputEntity.value)">Zkontroluj</button></span>
            </div>
            <span *ngIf="entity && !loadingEntity" class="help-block">{{entity.name}} (IČO: {{entity.ico}}, PSČ: {{entity.address?.postalCode}})</span>
            <span *ngIf="loadingEntity" class="help-block">hledám obec...</span>
            <span *ngIf="!entity && entityChecked && !loadingEntity" class="help-block">Obec nenalezena!</span>
          </div>
        </div>

        <div class="form-group">
          <label for="email" class="col-sm-3 control-label">Kontaktní email</label>
          <div class="col-sm-9">
            <input type="email" class="form-control" id="email" name="email" [ngModel]="profile.email">
          </div>
        </div>

        <div class="form-group">
          <label class="col-sm-3 control-label"></label>
          <div class="col-sm-9">
           <label class="control-label"><input type="checkbox" name="active" [ngModel]="profile.active"> Veřejný profil</label>
          </div>
        </div>
        
        <div class="submit">
          <button type="submit" class="btn btn-primary" [disabled]="!profileForm.valid">Uložit změny</button>
        </div>

      </form>
    </div>

    <div class="col-sm-3 actions">

      <h4 class="hidden">Akce</h4>
      <div class="form-group">
        <button type="button" class="btn btn-danger" (click)="deleteProfile()">Smazat profil</button>
      </div>
    </div>

  </div>
</div>